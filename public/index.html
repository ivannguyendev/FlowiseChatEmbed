<!--
  NOTE: This .html file (and public folder) is optional and can be safely deleted.
  It serves only as a demo/test page.
  
  The chatbot can be embedded directly on any allowed domain using the embed script that
  is generated when starting the server.
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowise Chatbot Widget</title>
</head>

<body>
    <div id="root"></div>
    <script type="module">
        import Chatbot from './web.js'
        
        // Example initialization:
        // If your .env contains:
        // agent1=xyz789-uvw456,https://example.com
        // support=abc123-def456,https://example.com
        // salesbot=ghi123-jkl456,https://example.com
        //
        const chatflowid = "";
        const apiHost = "http://localhost";
        // Then use the environment variable name as chatflowid:
        Chatbot.initFull({
            chatflowid: chatflowid,    // or 'support', 'salesbot', etc.
            apiHost: apiHost,
            storageAdapter : {
                async getMessages(chatflowid, chatId) {
                    console.log('getMessages', chatflowid)
                    return { chatHistory: [], chatId, lead: null }
                },
                async removeMessages(chatflowid, chatId) {
                    console.log(chatflowid, chatId)
                },
                async saveMessages(chatflowid, saveObj) {
                    console.log(chatflowid, saveObj)
                },
            }
        })
    </script>
    <flowise-fullchatbot></flowise-fullchatbot>
</body>

</html>